<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nighthawk Guessr</title>
    <link rel="stylesheet" href="./assets/style.css">
</head>
<body style="" onload = "resize()">
    <img src = "./assets/img/guess.jpg" id = "guess" width = "1767" height = "994" class = "topbar" style="top: 0px; left: 0px; opacity: 1;pointer-events: all;filter: blur(0px);">
    
    <img src = "./assets/svg/bar.svg" id = "bar" width = "800" height = "104" class = "topbar" style="top: 10px; left: 370px; opacity: 0.75;pointer-events: all;filter: blur(0px);">
    <img src = "./assets/svg/help.svg" id="help" onclick = "//prompt window with information" width = "60" height = "60" class = "topbarButtons" style="top: 32px; right: 0px; opacity: 0.75;pointer-events: all;filter: blur(0px);">
    <img src = "./assets/svg/home.svg" id="home" onclick = "leave('prompt')" width = "60" height = "60" class = "topbarButtons" style="top: 32px; left: 0px; opacity: 0.75;pointer-events: all;filter: blur(0px);">
    <img src = "./assets/img/map.png" id="map" class = "map" width = "400" height = "400" class = "topbar" style="top: 375px; left: 1120px; border-radius:50px;pointer-events: all;filter: blur(0px);z-index: 2;">
    <img src = "./assets/svg/pin.svg" id="pin" width = "21" height = "35" class = "topbar" style="opacity: 0; pointer-events: all;filter: blur(0px);z-index: 3;">
    <img src = "./assets/svg/submit.svg" id="submit" onclick = "sendPin()" width = "400" height = "47" class = "topbarButtons" style="top: 790px; left: 1120px; opacity: 0.5;pointer-events: all;filter: blur(0px);">

    <img src = "./assets/svg/leavePrompt.svg" id="leavePromptBox" onclick = "" width = "250" height = "500" class = "" style="position: absolute; top: 790px; left: 1120px; opacity: 0;pointer-events: none;z-index: 2;">
    <img src = "./assets/svg/leavePromptYes.svg" id="leavePromptBoxYes" onclick = "window.location.href = './index.html';" width = "88" height = "175" class = "leaveOption" style="top: 790px; left: 1120px; opacity: 0;pointer-events: none;filter: blur(0px);z-index: 2;">
    <img src = "./assets/svg/leavePromptNo.svg" id="leavePromptBoxNo" onclick = "leave('no')" width = "88" height = "175" class = "leaveOption" style="top: 790px; left: 1120px; opacity: 0;pointer-events: none;filter: blur(0px);z-index: 2;">
    
    <div class = "barText" id="mapText" style="top:60px; left:393px;pointer-events: all;filter: blur(0px);">DEL NORTE</div>
    <div class = "barText" id="round" style="top:60px; left:746px;pointer-events: all;filter: blur(0px);">1/5</div>
    <div class = "barText" id="score" style="top:60px; left:1070px;pointer-events: all;filter: blur(0px);">00,000</div>
</body>
    <script>
    function dynamic_Positioning(idName, origionalTop, origionalLeft, size) {
        var element = document.getElementById(idName);
        var element_Top = size * origionalTop;
        element.style.top = element_Top + "px";
        var element_Left = size * origionalLeft;
        element.style.left = element_Left + "px";
    }
    function dynamic_TextSize(className, origionalSize, size) {
        var element_Font = size * origionalSize;
        var elements = document.getElementsByClassName(className);
        for (var i = 0; i < elements.length; i++) {
            var element = elements[i];
            element.style.fontSize = element_Font + "px";
        }
    }
    function dynamic_imgSize(idName, origionalHeight, origionalWidth, origionalTop, origionalLeft, size) {
        var element = document.getElementById(idName);
        var element_Height = size * origionalHeight;
        element.style.width = element_Height + "px";
        var element_Width = size * origionalWidth;
        element.style.height = element_Width + "px";
        var element_Top = size * origionalTop;
        element.style.top = element_Top + "px";
        var element_Left = size * origionalLeft;
        element.style.left = element_Left + "px";
    }
    function dynamic_imgSizeRight(idName, origionalHeight, origionalWidth, origionalTop, origionalRight, size) {
        var element = document.getElementById(idName);
        var element_Height = size * origionalHeight;
        element.style.width = element_Height + "px";
        var element_Width = size * origionalWidth;
        element.style.height = element_Width + "px";
        var element_Top = size * origionalTop;
        element.style.top = element_Top + "px";
        var element_Right = size * origionalRight;
        element.style.right = element_Right + "px";
    }
    window.onscroll = function() {
        window.scrollTo(0, 0)
        console.log("Scrolling")
    };
    window.onresize = resize;
    function resize () {
        var current = window.innerWidth;
        var size = window.innerWidth/1536;

        // TOP BAR RESIZE
        dynamic_TextSize('barText', 26, size)
        dynamic_Positioning('mapText', 60, 393, size)
        dynamic_Positioning('round', 60, 746, size)
        dynamic_Positioning('score', 60, 1070, size)
        dynamic_imgSize('bar', 800, 104, 10, 375, size)
        // TOP BAR RESIZE

        // MENU BUTTONS RESIZE
        dynamic_imgSize('home', 60, 60, 32, 0, size)
        dynamic_imgSizeRight('help', 60, 60, 32, 0, size)
        // MENU BUTTONS RESIZE

        // GUESS RESIZE
        dynamic_imgSize("guess", 1767, 994, 0, 0, size)
        // GUESS RESIZE

        // MAP RESIZE
        dynamic_imgSize('pin', 21, 35, 0, 0, size)
        dynamic_imgSize('map', 400, 400, 375, 1120, size)
        dynamic_imgSize('submit', 400, 47, 790, 1120, size)
        // MAP RESIZE

        // LEAVE RESIZE
        dynamic_imgSize('leavePromptBox', 500, 250, 307, 518, size)
        dynamic_imgSize('leavePromptBoxNo', 175, 88, 450, 563, size)
        dynamic_imgSize('leavePromptBoxYes', 175, 88, 450, 798, size)
        // LEAVE RESIZE
    }
    </script>
    <script>
        document.getElementById("map").addEventListener('click', function (event) {
            bounds=this.getBoundingClientRect();
            var left=bounds.left;
            var top=bounds.top;
            var x = event.pageX - left;
            var y = event.pageY - top;
            var cw=this.clientWidth
            var ch=this.clientHeight
            var iw=this.naturalWidth
            var ih=this.naturalHeight
            var pinY=(y + (window.innerWidth/1536)*375 - (window.innerWidth/1536)*35)
            var pinX=(x + (window.innerWidth/1536)*1120 - (window.innerWidth/1536)*10)
            pinLeft=x
            pinTop=y
            document.getElementById("pin").style.opacity = "1";
            document.getElementById("pin").style.top = pinY + "px";
            document.getElementById("pin").style.left = pinX + "px";
        });
        function sendPin() {
            console.log("pin pos ("+pinLeft+", " +pinTop+ ")");
            // display points screen
        }
        function leave(option) {
            if (option == "prompt") {
                document.getElementById("leavePromptBox").style.opacity = "1";
                document.getElementById("leavePromptBox").style.pointerEvents = "all";
                document.getElementById("leavePromptBoxNo").style.opacity = "0.75";
                document.getElementById("leavePromptBoxNo").style.pointerEvents = "all";
                document.getElementById("leavePromptBoxYes").style.opacity = "0.75";
                document.getElementById("leavePromptBoxYes").style.pointerEvents = "all";

                document.getElementById("guess").style.pointerEvents = "none";
                document.getElementById("home").style.pointerEvents = "none";
                document.getElementById("bar").style.pointerEvents = "none";
                document.getElementById("help").style.pointerEvents = "none";
                document.getElementById("map").style.pointerEvents = "none";
                document.getElementById("pin").style.pointerEvents = "none";
                document.getElementById("submit").style.pointerEvents = "none";
                document.getElementById("mapText").style.pointerEvents = "none";
                document.getElementById("round").style.pointerEvents = "none";
                document.getElementById("score").style.pointerEvents = "none";

                document.getElementById("guess").style.filter = "blur(4px)";
                document.getElementById("home").style.filter = "blur(4px)";
                document.getElementById("bar").style.filter = "blur(4px)";
                document.getElementById("help").style.filter = "blur(4px)";
                document.getElementById("map").style.filter = "blur(4px)";
                document.getElementById("pin").style.filter = "blur(4px)";
                document.getElementById("submit").style.filter = "blur(4px)";
                document.getElementById("mapText").style.filter = "blur(4px)";
                document.getElementById("round").style.filter = "blur(4px)";
                document.getElementById("score").style.filter = "blur(4px)";
            } else if (option == "no") {
                document.getElementById("leavePromptBox").style.opacity = "0";
                document.getElementById("leavePromptBox").style.pointerEvents = "none";
                document.getElementById("leavePromptBoxNo").style.opacity = "0";
                document.getElementById("leavePromptBoxNo").style.pointerEvents = "none";
                document.getElementById("leavePromptBoxYes").style.opacity = "0";
                document.getElementById("leavePromptBoxYes").style.pointerEvents = "none";
                
                document.getElementById("guess").style.pointerEvents = "all";
                document.getElementById("home").style.pointerEvents = "all";
                document.getElementById("bar").style.pointerEvents = "all";
                document.getElementById("help").style.pointerEvents = "all";
                document.getElementById("map").style.pointerEvents = "all";
                document.getElementById("pin").style.pointerEvents = "all";
                document.getElementById("submit").style.pointerEvents = "all";
                document.getElementById("mapText").style.pointerEvents = "all";
                document.getElementById("round").style.pointerEvents = "all";
                document.getElementById("score").style.pointerEvents = "all";
                
                document.getElementById("guess").style.filter = "blur(0px)";
                document.getElementById("home").style.filter = "blur(0px)";
                document.getElementById("bar").style.filter = "blur(0px)";
                document.getElementById("help").style.filter = "blur(0px)";
                document.getElementById("map").style.filter = "blur(0px)";
                document.getElementById("pin").style.filter = "blur(0px)";
                document.getElementById("submit").style.filter = "blur(0px)";
                document.getElementById("mapText").style.filter = "blur(0px)";
                document.getElementById("round").style.filter = "blur(0px)";
                document.getElementById("score").style.filter = "blur(0px)";
            }
        }
        document.body.onkeyup = function(e) {
            if (e.key == " " ||
                e.code == "Space" ||      
                e.keyCode == 32      
            ) {
                sendPin()
            }
        }
    </script>
    <script>
        
      const isLocalhost = Boolean(
        window.location.hostname === "localhost" ||
        window.location.hostname === "[::1]" ||
        window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)
      )
      const api = isLocalhost ? "http://localhost:8200" : "";

      const getList = async () => {
        const list = await fetch(api + "/api/images/GetEasyImage").then((r) => r.json());
        return list
      };

      getList().then(list => {
        document.getElementsByTagName("body")[0].style = "background-image: url('data:image/png;base64, " + list.bytes +"');"
      })
    </script>
    <script>
  var difficulty = 'easy'; // Change this value to 'medium', 'hard', or 'easy' to adjust the difficulty

    var countdown; 
if (difficulty === 'easy') {
    countdown = 60; 
} else if (difficulty === 'medium') {
    countdown = 45; 
} else if (difficulty === 'hard') {
    countdown = 30; 
} else {
    console.log
    return; 
}

var countdownDisplay = document.getElementById('timer');

var countdownInterval = setInterval(function() {
    countdown--;
    countdownDisplay.textContent = countdown;

    if (countdown <= 0) {
        clearInterval(countdownInterval);
        countdownDisplay.textContent = "Time's up!";
    }
}, 1000);
    </script>
</body>
</html>

    </script>
</html>