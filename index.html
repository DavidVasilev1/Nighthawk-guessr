<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nighthawk Guessr</title>
    <link rel="stylesheet" href="./assets/style.css">
</head>
<script>

    window.onload = function() {
    var token = getCookie('token');
    if (!token) {
        window.location.href = '/login.html';
    }
    
}

function getCookie(name) {
    let cookieArr = document.cookie.split("; ");
    
    for(let i = 0; i < cookieArr.length; i++) {
        let cookiePair = cookieArr[i].split("=");
        
        if(name == cookiePair[0]) {
            return decodeURIComponent(cookiePair[1]);
        }
    }
    return null;
}
//function signOut() {
//    document.cookie = 'token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
//    window.location.href = '/login.html';
//}

</script>
<body style="background-color: #f4faf8;">
    <div class="menuText bounce" style="top: 235px;" onclick="window.location = './game.html'">PLAY</div>
    <div class="menuText bounce" style="top: 340px;" onclick="window.location = './Stats.html'">STATS</div>
    <div class="menuText bounce" style="top: 445px;" onclick="window.location = ''">TUTORIAL</div>
    <div class="menuText bounce" style="top: 550px;" onclick="window.location = './leaderboard.html'">LEADERBOARD</div>
    <img src = "./assets/svg/logo.svg" id="logo" width = "392" class = "home" style="top: 13px; left: 40px; opacity: 1;">
    <img src = "./assets/svg/profile.svg" id="profile" width = "80" height = "80" class = "home" style="top: 20px; left: 1436px; opacity: 1;">
    <div class="menuText bounce" style="top: 40px; left: 1175px;" onclick="window.location = './register.html'">SIGN IN</div>
    <img src = "./assets/svg/indexPhotos.svg" id="photos" width = "640" height = "640" class = "home" style="top: 112px; left: 775px; opacity: 1;">
    <img src = "./assets/svg/exit.svg" id="photos" width = "40" height = "40" class = "home" style="top: 801px; left: 1472px; opacity: 1;">
    <div class="home" style="top: 799px; left: 1278px;" onclick="signOut()">SIGN OUT</div>
</body>
<script>
    fetch('https://http://127.0.0.1:8200', {
    method: 'GET',
    credentials: 'include', // include cookies in the request
})
.then(response => response.json())
.then(data => {
    if (data.authenticated) {
        // if the user is authenticated, redirect to index.html
        window.location.href = './index.html';
    } else {
        // if the user is not authenticated, redirect to login.html (or wherever your login page is)
        window.location.href = './login.html';
    }
})
.catch(error => {
    console.error('Error:', error);
});

</script>
</html>
