<head>
    <!-- Load jQuery and DataTables styles and scripts -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css">
    <script type="text/javascript" language="javascript" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>var define = null;</script>
    <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
</head>
<body>
    <table id="flaskTable" class="table" style="width:100%">
        <thead id="flaskHead">
            <tr>
                <th>Username</th>
                <th>Total Points</th>
                <th>Easy Points</th>
                <th>Medium Points</th>
                <th>Hard Points</th>
            </tr>
        </thead>
        <tbody id="flaskBody"></tbody>
    </table>

    <script>
        $(document).ready(function() {
            const isLocalhost = Boolean(
                window.location.hostname === "localhost" ||
                window.location.hostname === "[::1]" ||
                window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)
            );

            const api = isLocalhost ? "http://localhost:8200" : "";

            fetch(api + "/api/leaderboard/leaderboardTop10", { mode: 'cors' })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('API response failed');
                    }
                    return response.json();
                })
                .then(data => {
                    console.log(data)
                    const table = $('#flaskTable').DataTable(); // Initialize DataTable
                    for (const row of data) {
                        table.row.add([
                            row.username,
                            row.total,
                            row.Easy,
                            row.Medium,
                            row.Hard
                        ]).draw(); // Add data row to the table
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
        });
    </script>
</body>