<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nighthawk Guessr</title>
    <link rel="stylesheet" href="./assets/style.css">
</head>
<body style="background-image: url('./assets/img/guess.jpg'); background-repeat: no-repeat; background-attachment: fixed; background-size: cover;" onload = "resize()">
    <img src = "./assets/svg/home.svg" id="home"onclick = "home()" width = "60" height = "60" class = "topbarButtons" style="top: 32px; left: 0px; opacity: 0.75;">
    <img src = "./assets/svg/help.svg" id="help" onclick = "//prompt window with information" width = "60" height = "60" class = "topbar" style="top: 32px; right: 0px; opacity: 0.75;">

  <style>
  * {
    font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
  }
  h1 {
    font-size: 32pt;
    text-align: center;
    margin-top: 40px;
  }
  table.board {
    font-size: 13pt;
    border-collapse: collapse;
    margin: 25px 0;
    margin-top: 40px;
    width: 80%;

  }
  .board thead tr {
    font-size: 17pt;
    font-weight: bold;
    background-color: #246186;
    color: #ffffff;
    text-align: left;
  }
  .board td {
    text-align: center;
    padding: 12px 15px;
    border: none;
    width: 200px;
    height: 50px;
  }
  .board tr {
    font-weight: bold;
    border: none;
    transition-duration: 0.3s;
    color: #0a2f47;
    background-color: #58a4d3;
    border-bottom: 4px solid #2b8bc6;
    width: 50%;
  }
  .board tr:hover {
    color: #ffffff;
    background-color: #246186;
  }
  #container {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  #dots {
    margin-top: -60px;
    margin-bottom: -35px;
    font-size: 60pt;
    color: #f1cc0c;
    opacity: 0.5;
  }
  .whiteColor {
    color:#fff;
  }
  .normalColor {
    color:#0a2f47;
  }
  .topBox {
    background-color: #3478A2;
  }
  .darkBox {
    background-color: #246186;
  }
  .normalBox {
    background-color: #58a4d3;
  }
</style>
  
 <div id="container">
  <h1>NIGHTHAWKGUESSR Leaderboard</h1>
  <table class="board" hidden id="total" style="margin-left: auto; margin-right: auto;">
    <tr>
      <thead>
        <td class="topBox" >Name</td>
        <td class="topBox" onclick="sort(0)">Easy Points</td>
        <td class="topBox" onclick="sort(1)">Medium Points</td>
        <td class="topBox" onclick="sort(2)">Hard Points</td>
        <td class="darkBox" onclick="sort(3)">Total Points</td>
      </thead>
    </tr>
  </table>

  <table class="board" id="easy" hidden style="margin-left: auto; margin-right: auto;">
    <tr>
      <thead>
        <td class="topBox">Name</td>
        <td class="darkBox" onclick="sort(0)">Easy Points</td>
        <td class="topBox" onclick="sort(1)">Medium Points</td>
        <td class="topBox" onclick="sort(2)">Hard Points</td>
        <td class="topBox" onclick="sort(3)">Total Points</td>
      </thead>
    </tr>
  </table>

  <table class="board" id="medium" hidden style="margin-left: auto; margin-right: auto;">
    <tr>
      <thead>
        <td class="topBox">Name</td>
        <td class="topBox" onclick="sort(0)">Easy Points</td>
        <td class="darkBox" onclick="sort(1)">Medium Points</td>
        <td class="topBox" onclick="sort(2)">Hard Points</td>
        <td class="topBox" onclick="sort(3)">Total Points</td>
      </thead>
    </tr>
  </table>

  <table class="board" id="hard" hidden style="margin-left: auto; margin-right: auto;">
    <tr>
      <thead>
        <td class="topBox">Name</td>
        <td class="topBox" onclick="sort(0)">Easy Points</td>
        <td class="topBox" onclick="sort(1)">Medium Points</td>
        <td class="darkBox" onclick="sort(2)">Hard Points</td>
        <td class="topBox" onclick="sort(3)">Total Points</td>
      </thead>
    </tr>
  </table>
</div>
    
</body>
    <script>

    
      easyBoard = document.getElementById("easy");
      
      mediumBoard = document.getElementById("medium");
      
      hardBoard = document.getElementById("hard");
      
      totalBoard = document.getElementById("total");
    function sort(Sort){
      easyBoard.style.display = "none"
      mediumBoard.style.display = "none"
      hardBoard.style.display = "none"
      totalBoard.style.display = "none"
      sortDiff = ["easy", "medium","hard","total"]
      x=document.getElementById(sortDiff[Sort])
      x.style.display = "block";
    }
    function dynamic_Positioning(idName, origionalTop, origionalLeft, size) {
        var element = document.getElementById(idName);
        var element_Top = size * origionalTop;
        element.style.top = element_Top + "px";
        var element_Left = size * origionalLeft;
        element.style.left = element_Left + "px";
    }
    function dynamic_TextSize(className, origionalSize, size) {
        var element_Font = size * origionalSize;
        var elements = document.getElementsByClassName(className);
        for (var i = 0; i < elements.length; i++) {
            var element = elements[i];
            element.style.fontSize = element_Font + "px";
        }
    }
    function dynamic_imgSize(idName, origionalHeight, origionalWidth, origionalTop, origionalLeft, size) {
        var element = document.getElementById(idName);
        var element_Height = size * origionalHeight;
        element.style.width = element_Height + "px";
        var element_Width = size * origionalWidth;
        element.style.height = element_Width + "px";
        var element_Top = size * origionalTop;
        element.style.top = element_Top + "px";
        var element_Left = size * origionalLeft;
        element.style.left = element_Left + "px";
    }
    function dynamic_imgSizeRight(idName, origionalHeight, origionalWidth, origionalTop, origionalRight, size) {
        var element = document.getElementById(idName);
        var element_Height = size * origionalHeight;
        element.style.width = element_Height + "px";
        var element_Width = size * origionalWidth;
        element.style.height = element_Width + "px";
        var element_Top = size * origionalTop;
        element.style.top = element_Top + "px";
        var element_Right = size * origionalRight;
        element.style.right = element_Right + "px";
    }
    window.onresize = resize;
    function resize () {
        var current = window.innerWidth;
        var size = window.innerWidth/1536;

        // TOP BAR RESIZE
        //dynamic_TextSize('barText', 26, size)
        //dynamic_Positioning('mapText', 60, 393, size)
        //dynamic_Positioning('round', 60, 746, size)
        //dynamic_Positioning('score', 60, 1070, size)
        //dynamic_imgSize('bar', 800, 104, 10, 375, size)
        // TOP BAR RESIZE

        // MENU BUTTONS RESIZE
        dynamic_imgSize('home', 60, 60, 32, 0, size)
        dynamic_imgSizeRight('help', 60, 60, 32, 0, size)
        // MENU BUTTONS RESIZE

        // MAP RESIZE
        //dynamic_imgSize('map', 400, 400, 375, 1120, size)
        dynamic_imgSize('submit', 400, 47, 790, 1120, size)
        // MENU RESIZE
    }
    </script>
    <script>
      function home() {
          window.location.href = '/index.html'
      }
    </script>
    <script>
      
      const isLocalhost = Boolean(
        window.location.hostname === "localhost" ||
        window.location.hostname === "[::1]" ||
        window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)
      )
      const api = isLocalhost ? "http://localhost:1337" : "";

      const getList = async () => {
        const list = await fetch(api + "/api/leaderboard/leaderboardTop10").then((r) => r.json());
        console.log("ap",list);
        return list
      };

      getList().then(list => {
        list["TotalSort"].forEach(cls => {
          addTask(cls.username, cls.total, cls.Easy, cls.Medium, cls.Hard,total,4)
        })
      })

      getList().then(list => {
        list["EasySort"].forEach(cls => {
          addTask(cls.username, cls.total, cls.Easy, cls.Medium, cls.Hard,easy,1)
        })
      })

      getList().then(list => {
        list["MediumSort"].forEach(cls => {
          addTask(cls.username, cls.total, cls.Easy, cls.Medium, cls.Hard,medium,2)
        })
      })

      getList().then(list => {
        list["HardSort"].forEach(cls => {
          addTask(cls.username, cls.total, cls.Easy, cls.Medium, cls.Hard,hard,3)
        })
      })
      x=document.getElementById("total")
      x.style.display = "block";
      function addTask(username, total, pointsEasy, pointsMedium, pointsHard,table,rownum) {
  
        var tableCells = [username, pointsEasy, pointsMedium, pointsHard, total]
        var row = document.createElement('tr')
        for (var i = 0; i < tableCells.length; i++) {
          var tableCell = document.createElement('td')
          tableCell.textContent = tableCells[i]
          tableCell.className = 'cell'
          //tableCell.bgColor = "#3478a2"
          tableCell.classList.add("normalBox")
          //tableCell.classList.add("normalColor")
          if (i == rownum){
            console.log(rownum)
            //tableCell.bgColor = "#246186"
            tableCell.classList.remove("normalColor")
            tableCell.classList.add("whiteColor")
            tableCell.classList.remove("normalBox")
            tableCell.classList.add("darkBox")
          }
          row.appendChild(tableCell)
          row.classList.add("hoverrow")
        }
        table.appendChild(row)
      }
    </script>
</html>
